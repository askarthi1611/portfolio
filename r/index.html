<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Responsive Document Viewer</title>

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
    }

    /* ----------- TOP BAR (Desktop + Mobile) ------------ */
    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #333;
      color: white;
      padding: 10px 15px;
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    .topbar-title {
      font-size: 18px;
    }

    /* ----------- Menu Button (Mobile Only) ------------ */
    .menu-btn {
      display: none;
      font-size: 22px;
      cursor: pointer;
      padding: 5px;
    }

    /* ----------- Tabs (Desktop Only) ------------ */
    .tabs {
      display: flex;
      background: #333;
      overflow-x: auto;
      white-space: nowrap;
      flex-wrap: wrap;
      gap: 5px;
      padding: 10px;
    }

    .tab {
      padding: 12px 16px;
      color: white;
      cursor: pointer;
      background-color: #444;
      border: none;
      outline: none;
      transition: 0.3s;
      border-radius: 4px;
    }

    .tab:hover {
      background-color: #666;
    }

    .tab.active {
      background-color: #0078d7;
    }

    /* ----------- Mobile Menu Drawer ------------ */
    .mobile-menu {
      display: none;
      flex-direction: column;
      background: #222;
      padding: 10px;
    }

    .mobile-menu .tab {
      margin-bottom: 6px;
      width: 100%;
      text-align: left;
    }

    /* ---- Viewer ---- */
    iframe,
    .docx-viewer {
      width: 100%;
      height: calc(100vh - 60px);
      border: none;
      display: none;
      overflow-y: auto;
    }

    .active-viewer {
      display: block !important;
    }

    /* ------- RESPONSIVE ------- */
    @media (max-width: 768px) {
      .tabs {
        display: none !important;
        /* hide desktop tabs */
      }

      .menu-btn {
        display: block;
        /* show menu icon */
      }
    }
  </style>
</head>

<body>

  <!-- TOP BAR -->
  <div class="topbar">
    <div class="topbar-title">Documents</div>
    <div class="menu-btn" onclick="toggleMobileMenu()">â˜°</div>
  </div>

  <!-- DESKTOP TABS -->
  <div class="tabs" id="tabs"></div>

  <!-- MOBILE MENU (Hidden initially) -->
  <div class="mobile-menu" id="mobileMenu"></div>

  <div id="viewer"></div>

  <script src="https://unpkg.com/mammoth/mammoth.browser.min.js"></script>

  <script>
    const docFiles = [
      "doc/Interview.pdf",
      "doc/book.pdf",
      "doc/TECHNICAL INTERVIEW ANSWERS.docx",
      "doc/GENERAL INTERVIEW ANSWERS.docx",
      "doc/JavaScript&HTML.docx",
      "doc/Realtime Interview QA.pdf",
      "doc/Karthikeyan_S.pdf",
      "doc/Karthikeyan_S1.pdf",
      "doc/Karthikeyan_S2.pdf",
    ];

    const tabsContainer = document.getElementById("tabs");
    const mobileMenu = document.getElementById("mobileMenu");
    const viewerContainer = document.getElementById("viewer");

    docFiles.forEach((file, index) => {
      const fileName = file.split("/").pop();
      const ext = file.split(".").pop().toLowerCase();
      const label = fileName.replace(/\.(pdf|docx|doc)/, "");

      const createTabButton = () => {
        const btn = document.createElement("button");
        btn.classList.add("tab");
        if (index === 2) btn.classList.add("active");  // Default tab = 3rd item
        btn.textContent = label;
        btn.addEventListener("click", () => showDoc(index));
        return btn;
      };

      const desktopTab = createTabButton();
      const mobileTab = createTabButton();
      tabsContainer.appendChild(desktopTab);
      mobileMenu.appendChild(mobileTab);

      let viewer;

      if (ext === "pdf") {
        viewer = document.createElement("iframe");
        viewer.src = "./../" + file;
      } else {
        viewer = document.createElement("div");
        viewer.classList.add("docx-viewer");
        viewer.style.padding = "20px";

        fetch("./../" + file)
          .then(res => res.arrayBuffer())
          .then(buf => mammoth.convertToHtml({ arrayBuffer: buf }))
          .then(html => viewer.innerHTML = html.value)
          .catch(() => viewer.innerHTML = "Error loading document");
      }

      if (index === 2) viewer.classList.add("active-viewer"); // Default viewer = 3rd tab

      viewerContainer.appendChild(viewer);
    });


    function showDoc(index) {
      const viewers = viewerContainer.children;
      const allTabs = document.querySelectorAll(".tab");

      // Update viewers
      Array.from(viewers).forEach((v, i) => {
        v.classList.toggle("active-viewer", i === index);
      });

      // Update tab highlight
      allTabs.forEach((t, i) => {
        t.classList.toggle("active", i === index);
      });

      // Close mobile menu after click
      mobileMenu.style.display = "none";
    }

    function toggleMobileMenu() {
      mobileMenu.style.display =
        mobileMenu.style.display === "flex" ? "none" : "flex";
    }
  </script>

</body>

</html>